<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lab07 CI/CD 简介 # CI/CD 基本概念 # CI/CD 指的是持续集成(Continuous Integration)、持续交付(Continuous Delivery)和持续部署(Continuous Deployment)。
在软件开发过程中，会经历开发、构建、测试、发布、部署等过程，在产品的迭代过程中，这些过程会不断地重复进行。
现在试想一下，你是一名测试人员，已经写好了很多测试用例，但是开发人员每次更新代码你都要手动重新构建软件，运行所有的测试用例并给出反馈，这是非常痛苦的。
CI/CD 就是将这些过程自动化的工具或者服务，请阅读这一篇 知乎文章了解更详细的信息。
简单来说，可以认为如下的观点是正确的：
持续集成：自动化地进行软件构建(Build)、测试(Test)、代码合并(Merge) 持续交付：自动化地进行软件代码的发布(Release)，发布的代码可以稳定地在生产环境中使用 持续部署：自动化地进行软件的部署(Deploy)，将代码库中的代码实际部署到生产环境中 常用的 CI/CD 工具 # CI/CD 的工具可以说是数不胜数，有无数种方案可以实现 CI/CD 的工作流。
根据项目的不同，选择的 CI/CD 工具很可能会不一样，这里简单地列出一些 CI/CD 工具：
Github Actions Jenkins Circle CI Gitlab CI Bitbucket Pipelines Azure DevOps 当需要用到这些工具的时候，再去查阅相关的官方文档就可以了，软件开发不就是看文档写文档嘛，有什么难的（bushi
大作业 CI/CD 推荐方案 # 虽然大作业不强制要求部署到云服务器上，但是我们建议每个小组都购买一台云服务器，并且实现在云服务器上部署你们的网站。一些云服务器可以按小时计费，最基础的云服务器包年大概在100 元左右(学生价)。 我们推荐在 Github 上实现大作业前后端的 CI/CD，前后端各自一个仓库，两个仓库采用各自的 CI/CD 工作流。在向仓库的 main 分支 push 之后，利用 Github Actions 自动化地实现前后端项目在云服务器上的自动部署。
关于 Github Actions 的简单介绍，可以看看 这篇博客。"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="CI/CD 简介"><meta property="og:description" content="Lab07 CI/CD 简介 # CI/CD 基本概念 # CI/CD 指的是持续集成(Continuous Integration)、持续交付(Continuous Delivery)和持续部署(Continuous Deployment)。
在软件开发过程中，会经历开发、构建、测试、发布、部署等过程，在产品的迭代过程中，这些过程会不断地重复进行。
现在试想一下，你是一名测试人员，已经写好了很多测试用例，但是开发人员每次更新代码你都要手动重新构建软件，运行所有的测试用例并给出反馈，这是非常痛苦的。
CI/CD 就是将这些过程自动化的工具或者服务，请阅读这一篇 知乎文章了解更详细的信息。
简单来说，可以认为如下的观点是正确的：
持续集成：自动化地进行软件构建(Build)、测试(Test)、代码合并(Merge) 持续交付：自动化地进行软件代码的发布(Release)，发布的代码可以稳定地在生产环境中使用 持续部署：自动化地进行软件的部署(Deploy)，将代码库中的代码实际部署到生产环境中 常用的 CI/CD 工具 # CI/CD 的工具可以说是数不胜数，有无数种方案可以实现 CI/CD 的工作流。
根据项目的不同，选择的 CI/CD 工具很可能会不一样，这里简单地列出一些 CI/CD 工具：
Github Actions Jenkins Circle CI Gitlab CI Bitbucket Pipelines Azure DevOps 当需要用到这些工具的时候，再去查阅相关的官方文档就可以了，软件开发不就是看文档写文档嘛，有什么难的（bushi
大作业 CI/CD 推荐方案 # 虽然大作业不强制要求部署到云服务器上，但是我们建议每个小组都购买一台云服务器，并且实现在云服务器上部署你们的网站。一些云服务器可以按小时计费，最基础的云服务器包年大概在100 元左右(学生价)。 我们推荐在 Github 上实现大作业前后端的 CI/CD，前后端各自一个仓库，两个仓库采用各自的 CI/CD 工作流。在向仓库的 main 分支 push 之后，利用 Github Actions 自动化地实现前后端项目在云服务器上的自动部署。
关于 Github Actions 的简单介绍，可以看看 这篇博客。"><meta property="og:type" content="article"><meta property="og:url" content="https://BUAA-GoodBro2021.github.io/SE-Labs/docs/labs/lab07/CI_CD/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-04-19T10:54:00+08:00"><title>CI/CD 简介 | 软件工程基础上机指南</title><link rel=manifest href=/SE-Labs/manifest.json><link rel=icon href=/SE-Labs/favicon.png type=image/x-icon><link rel=stylesheet href=/SE-Labs/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous><script defer src=/SE-Labs/flexsearch.min.js></script>
<script defer src=/SE-Labs/en.search.min.6df40ce09760f2aef066110ff29ef7ba2ab4eeb653dda78fb62e8fe0c8ab6521.js integrity="sha256-bfQM4Jdg8q7wZhEP8p73uiq07rZT3aePti6P4MirZSE=" crossorigin=anonymous></script>
<script defer src=/SE-Labs/sw.min.f070c2d3fe61272a24a6ca9a09530ce459448de39ce9b3c07c7e12ee4e7b69a1.js integrity="sha256-8HDC0/5hJyokpsqaCVMM5FlEjeOc6bPAfH4S7k57aaE=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/SE-Labs/><span>软件工程基础上机指南</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Labs</span><ul><li><a href=/SE-Labs/docs/labs/lab01/>Lab01 Git</a><ul><li><a href=/SE-Labs/docs/labs/lab01/git/>Git 简易教程</a></li><li><a href=/SE-Labs/docs/labs/lab01/git_command/>Git 指令全集</a></li></ul></li><li><a href=/SE-Labs/docs/labs/lab02/>Lab02 前后端基础Ⅰ</a><ul><li><a href=/SE-Labs/docs/labs/lab02/frontend_index/>前端实验指南</a></li><li><a href=/SE-Labs/docs/labs/lab02/Example-code/>前端示例代码</a></li><li><a href=/SE-Labs/docs/labs/lab02/backend_index/>后端实验指南</a></li><li><a href=/SE-Labs/docs/labs/lab02/django_door/>Django入门篇</a></li><li><a href=/SE-Labs/docs/labs/lab02/django_earth/>Django入土篇</a></li></ul></li><li><a href=/SE-Labs/docs/labs/lab03/>Lab03 前后端基础Ⅱ</a><ul><li><a href=/SE-Labs/docs/labs/lab03/frontend_index/>前端实验指南</a></li><li><a href=/SE-Labs/docs/labs/lab03/backend_index/>后端实验指南</a></li><li><a href=/SE-Labs/docs/labs/lab03/vuebook/>Vue Guide Book</a><ul><li><a href=/SE-Labs/docs/labs/lab03/vuebook/vue_install/>Vue 安装</a></li><li><a href=/SE-Labs/docs/labs/lab03/vuebook/vue_create_project/>Vue 创建项目</a></li><li><a href=/SE-Labs/docs/labs/lab03/vuebook/vue_structure/>Vue 项目架构</a></li></ul></li><li><a href=/SE-Labs/docs/labs/lab03/yaml%E5%B0%8F%E6%8C%87%E5%8D%97/>YAML 小指南</a></li></ul></li><li><a href=/SE-Labs/docs/labs/lab04/>Lab04 项目管理与数据库建模</a><ul></ul></li><li><a href=/SE-Labs/docs/labs/lab05/>Lab05 UML图的绘制</a><ul></ul></li><li><a href=/SE-Labs/docs/labs/lab06/>Lab06 软件测试</a><ul></ul></li><li><a href=/SE-Labs/docs/labs/lab07/>Lab07 项目部署</a><ul><li><a href=/SE-Labs/docs/labs/lab07/CI_CD/ class=active>CI/CD 简介</a></li><li><a href=/SE-Labs/docs/labs/lab07/deployment/>前后端项目部署</a></li></ul></li></ul></li></ul><ul><li><a href=https://github.com/BUAA-GoodBro2021/SE-Labs target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/SE-Labs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>CI/CD 简介</strong>
<label for=toc-control><img src=/SE-Labs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#lab07-cicd-简介>Lab07 CI/CD 简介</a><ul><li><a href=#cicd-基本概念>CI/CD 基本概念</a></li><li><a href=#常用的-cicd-工具>常用的 CI/CD 工具</a></li><li><a href=#大作业-cicd-推荐方案>大作业 CI/CD 推荐方案</a></li><li><a href=#实验作业>实验作业</a><ul><li><a href=#环境配置>环境配置</a><ul><li><a href=#安装-hugo>安装 Hugo</a></li><li><a href=#创建个人博客>创建个人博客</a></li><li><a href=#使用-papermod-主题>使用 PaperMod 主题</a></li><li><a href=#第一篇文章>第一篇文章</a></li><li><a href=#博客的美化>博客的美化</a></li></ul></li><li><a href=#启用-github-pages>启用 Github Pages</a><ul><li><a href=#创建个人博客仓库>创建个人博客仓库</a></li><li><a href=#创建usernamegithubio仓库>创建username.github.io仓库</a></li></ul></li><li><a href=#添加-cd-工作流>添加 CD 工作流</a><ul><li><a href=#博客仓库的配置>博客仓库的配置</a></li><li><a href=#配置文件的编写>配置文件的编写</a></li></ul></li><li><a href=#结果验证>结果验证</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=lab07-cicd-简介>Lab07 CI/CD 简介
<a class=anchor href=#lab07-cicd-%e7%ae%80%e4%bb%8b>#</a></h1><h2 id=cicd-基本概念>CI/CD 基本概念
<a class=anchor href=#cicd-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5>#</a></h2><p><strong>CI/CD</strong> 指的是<strong>持续集成</strong>(Continuous Integration)、<strong>持续交付</strong>(Continuous Delivery)和<strong>持续部署</strong>(Continuous Deployment)。</p><p><img src=/SE-Labs/images/lab7/ci_cd.jpg alt="CI/CD 图解"></p><p>在软件开发过程中，会经历开发、构建、测试、发布、部署等过程，在产品的<strong>迭代</strong>过程中，这些过程会不断地重复进行。</p><p>现在试想一下，你是一名<strong>测试人员</strong>，已经写好了很多测试用例，但是<strong>开发人员</strong>每次更新代码你都要手动重新构建软件，运行所有的测试用例并给出反馈，这是非常痛苦的。</p><p>CI/CD 就是将这些过程<strong>自动化</strong>的工具或者服务，请阅读这一篇
<a href=https://zhuanlan.zhihu.com/p/422815048>知乎文章</a>了解更详细的信息。</p><p>简单来说，可以认为如下的观点是正确的：</p><ul><li>持续集成：自动化地进行软件<strong>构建</strong>(Build)、<strong>测试</strong>(Test)、<strong>代码合并</strong>(Merge)</li><li>持续交付：自动化地进行软件代码的<strong>发布</strong>(Release)，发布的代码可以稳定地在生产环境中使用</li><li>持续部署：自动化地进行软件的<strong>部署</strong>(Deploy)，将代码库中的代码实际部署到生产环境中</li></ul><h2 id=常用的-cicd-工具>常用的 CI/CD 工具
<a class=anchor href=#%e5%b8%b8%e7%94%a8%e7%9a%84-cicd-%e5%b7%a5%e5%85%b7>#</a></h2><p>CI/CD 的工具可以说是<strong>数不胜数</strong>，有无数种方案可以实现 CI/CD 的工作流。</p><p>根据项目的不同，选择的 CI/CD 工具很可能会<strong>不一样</strong>，这里简单地列出一些 CI/CD 工具：</p><ul><li><strong>Github Actions</strong></li><li>Jenkins</li><li>Circle CI</li><li>Gitlab CI</li><li>Bitbucket Pipelines</li><li>Azure DevOps</li></ul><p>当需要用到这些工具的时候，再去查阅相关的<strong>官方文档</strong>就可以了，软件开发不就是看文档写文档嘛，有什么难的（bushi</p><h2 id=大作业-cicd-推荐方案>大作业 CI/CD 推荐方案
<a class=anchor href=#%e5%a4%a7%e4%bd%9c%e4%b8%9a-cicd-%e6%8e%a8%e8%8d%90%e6%96%b9%e6%a1%88>#</a></h2><blockquote class="book-hint info">虽然大作业<strong>不强制要求</strong>部署到云服务器上，但是我们建议每个小组都购买一台云服务器，并且实现在云服务器上部署你们的网站。一些云服务器可以<strong>按小时计费</strong>，最基础的云服务器<strong>包年</strong>大概在<strong>100 元</strong>左右(学生价)。</blockquote><p>我们推荐在 <strong>Github</strong> 上实现大作业前后端的 CI/CD，前后端各自一个仓库，两个仓库采用各自的 CI/CD 工作流。在向仓库的 main 分支 push 之后，利用 Github Actions 自动化地实现前后端项目在云服务器上的自动部署。</p><p>关于 Github Actions 的简单介绍，可以看看
<a href=https://matrix53.github.io/2021/07/25/Github%E6%8E%A2%E7%A7%98/>这篇博客</a>。</p><h2 id=实验作业>实验作业
<a class=anchor href=#%e5%ae%9e%e9%aa%8c%e4%bd%9c%e4%b8%9a>#</a></h2><p>部署自己的<strong>个人博客</strong>！</p><blockquote class="book-hint info">CI/CD 的实验作业将仅涉及到 <strong>CD</strong> 的内容，使用
<a href=https://gohugo.io/>Hugo</a> 作为博客框架，使用
<a href=https://github.com/adityatelange/hugo-PaperMod>PaperMod</a> 主题，部署的个人博客在所有截图完成后可删除(当然也可以保留)</blockquote><blockquote class="book-hint danger"><ul><li>如果已经有同学实现了<strong>大作业</strong>的 CI/CD，那么你的 CI/CD 作业可以<strong>不用写</strong>，但是需要提交你大作业的<strong>自动化部署方案</strong>，即你是如何利用 Github Actions 之类的工具实现自动化的</li><li>如果有同学已经有了<strong>个人博客</strong>，且已经实现了个人博客的<strong>自动化部署</strong>，那么可以提交你自己的个人博客的 CD 方案，这种情况也不用完成本文接下来的内容</li></ul></blockquote><blockquote class="book-hint warning">作业命名为<strong>CI_CD_个人博客.pdf</strong>或者<strong>CI_CD_大作业.pdf</strong>，建议使用 Markdown 编写然后导出 pdf</blockquote><h3 id=环境配置>环境配置
<a class=anchor href=#%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae>#</a></h3><blockquote class="book-hint info">这一部分内容适用于<strong>想要保留</strong>个人博客的同学，不想保留的可以 <strong>fork</strong>
<a href=https://github.com/Super-BUAA-2021/myblog>这个仓库</a>到自己的 Github 账户下，并<strong>直接跳过</strong>环境配置这一部分</blockquote><h4 id=安装-hugo>安装 Hugo
<a class=anchor href=#%e5%ae%89%e8%a3%85-hugo>#</a></h4><blockquote><p>官方安装文档：https://gohugo.io/getting-started/installing/</p></blockquote><div class=book-tabs><input type=radio class=toggle name=tabs-1 id=tabs-1-0 checked>
<label for=tabs-1-0>MacOS</label><div class="book-tabs-content markdown-inner"><p>使用 <strong>Homebrew</strong> 安装：<code>brew install hugo</code></p><p>使用 <strong>MacPorts</strong> 安装：<code>port install hugo</code></p></div><input type=radio class=toggle name=tabs-1 id=tabs-1-1>
<label for=tabs-1-1>Linux</label><div class="book-tabs-content markdown-inner"><p>在 <strong>Ubuntu</strong> 下：<code>sudo apt install hugo</code></p><p>在 <strong>Arch Linux</strong> 下：<code>sudo pacman -Syu hugo</code></p></div><input type=radio class=toggle name=tabs-1 id=tabs-1-2>
<label for=tabs-1-2>Windows</label><div class="book-tabs-content markdown-inner"><ol><li>下载
<a href=https://github.com/gohugoio/hugo/releases/download/v0.98.0/hugo_0.98.0_Windows-64bit.zip>hugo_0.98.0_Windows-64bit.zip</a></li><li>解压该zip文件，将<strong>hugo.exe</strong>移动到一个合适的目录(例如D:\Hugo)</li><li>将hugo.exe所在的<strong>目录</strong>(例如D:\Hugo)加入到<strong>系统环境变量</strong>中</li></ol></div></div><h4 id=创建个人博客>创建个人博客
<a class=anchor href=#%e5%88%9b%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2>#</a></h4><blockquote><p>Hugo 官方文档：https://gohugo.io/documentation/</p></blockquote><p>打开你的 <strong>Terminal</strong>，将<strong>工作目录</strong>切换到工作区(下文中以D:\Workspace代替)：<code>cd D:\Workspace</code></p><p>使用 Hugo 生成<strong>新站点</strong>：<code>hugo new site blog -f yml</code></p><p>现在，你的个人博客就创建好了，位于<code>D:\Workspace\blog</code>下</p><h4 id=使用-papermod-主题>使用 PaperMod 主题
<a class=anchor href=#%e4%bd%bf%e7%94%a8-papermod-%e4%b8%bb%e9%a2%98>#</a></h4><blockquote class="book-hint info">使用别的主题也可以，<strong>但是</strong>要在提交的作业中说明</blockquote><blockquote><p>PaperMod 主题官方文档：https://github.com/adityatelange/hugo-PaperMod</p></blockquote><p>将工作目录切换到<strong>个人博客</strong>下：<code>cd D:\Workspace\blog</code></p><p>初始化 <strong>Git</strong> 仓库：<code>git init</code></p><p>使用 <strong>PaperMod</strong> 主题：<code>git submodule add --depth=1 https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod</code></p><p>在<code>D:\Workspace\blog\config.yml</code>中添加这一行(更详细的配置参见<strong>Hugo框架</strong>以及<strong>PaperMod主题</strong>的官方文档)：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>theme</span>: <span style=color:#e6db74>&#34;PaperMod&#34;</span>
</span></span></code></pre></div><h4 id=第一篇文章>第一篇文章
<a class=anchor href=#%e7%ac%ac%e4%b8%80%e7%af%87%e6%96%87%e7%ab%a0>#</a></h4><p>将工作目录切换到<strong>个人博客</strong>下：<code>cd D:\Workspace\blog</code></p><p><strong>创建</strong>一篇新文章：<code>hugo new posts/my-first-post.md</code></p><p>编辑<code>D:\Workspace\blog\content\posts\my-first-post.md</code>，将其内容<strong>修改</strong>为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>---
</span></span><span style=display:flex><span>title: &#34;My First Post&#34;
</span></span><span style=display:flex><span>date: 2022-05-04T13:25:38+08:00
</span></span><span style=display:flex><span>draft: false
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>我的第一篇博客
</span></span></code></pre></div><p>启动 Hugo 服务器<strong>查看</strong>当前的博客效果：<code>hugo server</code></p><p>服务器运行<strong>成功后</strong>，可以在<code>http://localhost:1313</code>查看博客效果，例如下图：</p><p><img src=/SE-Labs/images/lab7/blog1.png alt=第一篇博客></p><h4 id=博客的美化>博客的美化
<a class=anchor href=#%e5%8d%9a%e5%ae%a2%e7%9a%84%e7%be%8e%e5%8c%96>#</a></h4><p>这部分内容不做要求，将不再展开讲解，有兴趣的同学可以自行查阅
<a href=https://github.com/adityatelange/hugo-PaperMod/wiki/Features>PaperMod主题的文档</a>进行配置，PaperMod主题还有一个
<a href=https://adityatelange.github.io/hugo-PaperMod/>示例的博客网站</a>以供参阅，实际配置起来并不复杂。</p><blockquote class="book-hint info"><p>对于喜欢折腾个人博客的同学来说，可以参考<a href=https://anzhiy.cn/posts/sdxhu.html target=_blank>butterfly 重装日记</a>，演示效果如下。</p><iframe src="//player.bilibili.com/player.html?aid=556933559&bvid=BV13v4y1c75G&cid=800077849&page=1" scrolling=no border=0 frameborder=no framespacing=0 allowfullscreen style=margin:auto></iframe></blockquote><h3 id=启用-github-pages>启用 Github Pages
<a class=anchor href=#%e5%90%af%e7%94%a8-github-pages>#</a></h3><p>关于 Github Pages，这里有一篇
<a href=https://matrix53.github.io/2021/07/25/Github%E6%8E%A2%E7%A7%98/>博客</a>可以作为简单的参考</p><h4 id=创建个人博客仓库>创建个人博客仓库
<a class=anchor href=#%e5%88%9b%e5%bb%ba%e4%b8%aa%e4%ba%ba%e5%8d%9a%e5%ae%a2%e4%bb%93%e5%ba%93>#</a></h4><div class=book-tabs><input type=radio class=toggle name=tabs-2 id=tabs-2-0 checked>
<label for=tabs-2-0>跳过了环境配置看这里</label><div class="book-tabs-content markdown-inner">除了fork
<a href=https://github.com/Super-BUAA-2021/myblog>这个仓库</a>之外不需要做任何事</div><input type=radio class=toggle name=tabs-2 id=tabs-2-1>
<label for=tabs-2-1>没有跳过环境配置看这里</label><div class="book-tabs-content markdown-inner"><ol><li>在Github上<strong>新建</strong>一个仓库(名字叫myblog或者blog之类的，下文假设为myblog)，最好是public的仓库，例如下图的配置：
<img src=/SE-Labs/images/lab7/blog2.png alt=博客仓库配置></li><li>根据Github的提示，将本地的<code>D:\Workspace\blog</code>仓库push到远程仓库，例如下图中的红色方框所示：
<img src=/SE-Labs/images/lab7/blog3.png alt=推送到远程></li></ol></div></div><p>创建好仓库之后，结果应该如下图所示：
<img src=/SE-Labs/images/lab7/blog4.png alt=初始化博客仓库></p><h4 id=创建usernamegithubio仓库>创建username.github.io仓库
<a class=anchor href=#%e5%88%9b%e5%bb%bausernamegithubio%e4%bb%93%e5%ba%93>#</a></h4><p>为了使用 Github Pages，该仓库是必须要创建的，这里的<strong>username是你的Github用户名</strong>，例如下图：
<img src=/SE-Labs/images/lab7/blog5.png alt=初始化仓库></p><p>至此，你已经有了两个仓库，即<code>myblog</code>和<code>username.github.io</code></p><blockquote class="book-hint danger">将这两个仓库目前的<strong>内容</strong>截图，作为作业的<strong>第一张截图</strong></blockquote><h3 id=添加-cd-工作流>添加 CD 工作流
<a class=anchor href=#%e6%b7%bb%e5%8a%a0-cd-%e5%b7%a5%e4%bd%9c%e6%b5%81>#</a></h3><h4 id=博客仓库的配置>博客仓库的配置
<a class=anchor href=#%e5%8d%9a%e5%ae%a2%e4%bb%93%e5%ba%93%e7%9a%84%e9%85%8d%e7%bd%ae>#</a></h4><p>在远程仓库上<strong>新建</strong>一个名为<code>gh-pages</code>的分支，如下图所示：
<img src=/SE-Labs/images/lab7/blog8.png alt=新建分支></p><p>在博客仓库的<code>Settings -> Actions -> General</code>中<strong>修改</strong>如下配置，使得 Github Actions 拥有对仓库的写权限，如下图所示：
<img src=/SE-Labs/images/lab7/blog12.png alt=修改配置></p><p>接下来<strong>查看</strong><code>Settings -> Pages</code>下的内容，就会发现Github Pages<strong>已经启用了</strong>，例如下图：
<img src=/SE-Labs/images/lab7/blog11.png alt=成功启用></p><blockquote class="book-hint info">如果没有启用，需要检查自己曾经是否进行过<code>username.github.io</code>仓库或其他仓库的Github Pages配置，并对其进行<code>Unpublish site</code>操作。</blockquote><blockquote class="book-hint danger">将Github Pages成功启用的<strong>页面</strong>截图，作为作业的<strong>第二张截图</strong></blockquote><h4 id=配置文件的编写>配置文件的编写
<a class=anchor href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%9a%84%e7%bc%96%e5%86%99>#</a></h4><p>为了使用 Github Actions，我们需要在博客仓库中创建<code>.github/workflows</code>文件夹，如下图所示：
<img src=/SE-Labs/images/lab7/blog6.png alt=创建文件夹></p><p>在该文件夹中的<code>yml</code>文件将成为我们定义的CI/CD工作流，下面我们在<code>.github/workflows</code>中创建一个<code>gh-pages.yml</code>文件，如下图所示：</p><p><img src=/SE-Labs/images/lab7/blog7.png alt=新建工作流></p><p><code>gh-pages.yml</code>文件的内容为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># Set a branch to deploy</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-20.04</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#75715e># extended: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</span></span></code></pre></div><blockquote class="book-hint info"><p>下面是具体步骤的解释：</p><ul><li><code>uses: actions/checkout@v2</code>: 使用 GitHub 官方的 <code>actions/checkout Action</code> 操作，用于将代码检出到 Workflow 的 Runner 中。<code>submodules: true</code> 会把 Hugo 的主题一起检出，<code>fetch-depth: 0</code> 会将所有历史记录都检出到 Runner 中，以便 Hugo 可以找到 .GitInfo 和 .Lastmod 文件。</li><li><code>name: Setup Hugo</code>: 指定这个步骤的名称，这里是设置 Hugo。使用 <code>peaceiris/actions-hugo</code> Action 操作，用于在 Workflow 的 Runner 中安装 Hugo。</li><li><code>hugo-version: 'latest'</code>: 指定要安装的 Hugo 版本，这里是最新版本。</li><li><code>run: hugo --minify</code>: 构建站点并将其压缩，减小文件大小并加快网站加载速度。</li><li><code>name: Deploy</code>: 指定这个步骤的名称，这里是部署。使用 <code>peaceiris/actions-gh-pages</code> Action 操作，将构建好的 Hugo 站点发布到 GitHub Pages，这里是发布到 <code>gh-pages</code> 分支。</li><li><code>if: github.ref == 'refs/heads/main'</code>: 只有在 Push 到 <code>main</code> 分支时才会运行此步骤。</li><li><code>github_token: ${{ secrets.GITHUB_TOKEN }}</code>: 指定 GitHub Personal Access Token，用于发布网站到 GitHub Pages。</li><li><code>publish_dir: ./public</code>: 指定要发布的目录，这里是 <code>./public</code> 目录，它是 Hugo 生成的静态 HTML 文件所在的目录。</li></ul></blockquote><blockquote class="book-hint info"><code>GITHUB_TOKEN</code> 是GitHub官方提供的一个<strong>特殊的</strong>token，用于代表 GitHub Actions 进行身份验证，不需要自己创建。更多信息可以参考<a href=https://docs.github.com/zh/actions/security-guides/automatic-token-authentication target=_blank>自动令牌身份验证</a>。</blockquote><blockquote class="book-hint info"><p>另外，为了博客网站的<strong>正常展示</strong>，<strong>还需要</strong>将<code>config.yml</code>中的<strong>baseURL</strong>更改为这样的格式：
<code>https://&lt;USERNAME>.github.io/&lt;REPOSITORY_NAME></code></p><p>最后的<code>config.yml</code>文件大概如下所示(<strong>用户名和仓库名称用自己的</strong>)：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>baseURL</span>: <span style=color:#ae81ff>https://llleoli.github.io/myblog/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>languageCode</span>: <span style=color:#ae81ff>en-us</span>
</span></span><span style=display:flex><span><span style=color:#f92672>title</span>: <span style=color:#ae81ff>My New Hugo Site</span>
</span></span><span style=display:flex><span><span style=color:#f92672>theme</span>: <span style=color:#e6db74>&#34;PaperMod&#34;</span>
</span></span></code></pre></div></blockquote><p>最后，将博客仓库中新增的更改<strong>push到远程</strong>，CI/CD 的工作流就<strong>已经实现了</strong>。</p><blockquote class="book-hint danger">将目前博客远程仓库中的<strong>内容</strong>截图，作为作业的<strong>第三张截图</strong></blockquote><h3 id=结果验证>结果验证
<a class=anchor href=#%e7%bb%93%e6%9e%9c%e9%aa%8c%e8%af%81>#</a></h3><p>访问自己的博客网站，<strong>查看</strong>网站效果，如下图所示：
<img src=/SE-Labs/images/lab7/blog13.png alt=查看效果></p><blockquote class="book-hint danger">将自己博客的<strong>网址和内容</strong>截图，作为作业的<strong>最后一张(第四张)截图</strong></blockquote><p><strong>好了</strong>，到目前为止，你已经有了一个可以访问的<strong>个人博客</strong>了！如果想了解更多Github Actions的信息，建议去阅读官方文档，<strong>没有什么东西比官方文档更好用了</strong>。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/alex-shpak/hugo-book/commit/e7193feaba94cebb64eb83b74d56bb4a5464f181 title='Last modified by 李昊 | April 19, 2023' target=_blank rel=noopener><img src=/SE-Labs/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 19, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/alex-shpak/hugo-book/edit/main/exampleSite/content/docs/labs/lab07/CI_CD.md target=_blank rel=noopener><img src=/SE-Labs/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://utteranc.es/client.js repo=BUAA-GoodBro2021/SE-Labs issue-term=pathname label=Comment theme=github-light crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#lab07-cicd-简介>Lab07 CI/CD 简介</a><ul><li><a href=#cicd-基本概念>CI/CD 基本概念</a></li><li><a href=#常用的-cicd-工具>常用的 CI/CD 工具</a></li><li><a href=#大作业-cicd-推荐方案>大作业 CI/CD 推荐方案</a></li><li><a href=#实验作业>实验作业</a><ul><li><a href=#环境配置>环境配置</a><ul><li><a href=#安装-hugo>安装 Hugo</a></li><li><a href=#创建个人博客>创建个人博客</a></li><li><a href=#使用-papermod-主题>使用 PaperMod 主题</a></li><li><a href=#第一篇文章>第一篇文章</a></li><li><a href=#博客的美化>博客的美化</a></li></ul></li><li><a href=#启用-github-pages>启用 Github Pages</a><ul><li><a href=#创建个人博客仓库>创建个人博客仓库</a></li><li><a href=#创建usernamegithubio仓库>创建username.github.io仓库</a></li></ul></li><li><a href=#添加-cd-工作流>添加 CD 工作流</a><ul><li><a href=#博客仓库的配置>博客仓库的配置</a></li><li><a href=#配置文件的编写>配置文件的编写</a></li></ul></li><li><a href=#结果验证>结果验证</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>